{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function fetchImages(query,page) {\n\n\n    const BASE_URL = \"https://pixabay.com/api/\";\n\nconst response = await axios.get(BASE_URL,{\n  params: {\n\n    key: \"43104791-fccc42375971f64c47e678deb\",\n    q: query,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: \"true\",\n    page,\n    per_page: 15,\n  }\n})\n\n    return response.data\n}","import SimpleLightbox from \"simplelightbox\"\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryList = document.querySelector(\".gallery\");\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',});\n\nexport async function renderImages(data) {\n\n    const galleryMarkup = data.map(({largeImageURL,webformatURL,tags,likes,views,comments,downloads}) => {\n      \n        return `<li class=\"photos-list-item\">\n        <a class=\"photos-list-link\" href=\"${largeImageURL}\">\n        <img class=\"photo\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n        </a>\n        <ul class=\"photo-information-container\">\n        <li class=\"item-photo-information-container\"><p><span class=\"accent\">Likes</span></br>${likes}</p></li>\n        <li class=\"item-photo-information-container\"><p><span class=\"accent\">Views</span></br>${views}</p></li>\n        <li class=\"item-photo-information-container\"><p><span class=\"accent\">Comments</span></br>${comments}</p></li>\n        <li class=\"item-photo-information-container\"><p><span class=\"accent\">Downloads</span></br>${downloads}</p></li>\n        </ul>\n        </li>`}).join(\"\");\n    \n    galleryList.insertAdjacentHTML('beforeend', galleryMarkup);\n    \n    lightbox.refresh();\n  }","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { fetchImages } from \"./js/pixabay-api.js\";\nimport { renderImages } from \"./js/render-functions.js\";\n\n\nconst galleryList = document.querySelector(\".gallery\");\nconst form = document.querySelector(\"form\");\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector(\".btnMore\");\n\n\nlet page = 1;\nlet query;\nlet totalPages;\nlet perPage = 15;\n\n\n//*===========================================================================================================\n\nfunction showLoader() {\n    loader.classList.remove(\"is-hidden\");}\n\n\nfunction hideLoader() {\n    loader.classList.add(\"is-hidden\");}\n\n//*===========================================================================================================\nform.addEventListener(\"submit\", validInput);\n\nasync function validInput(event){\n\n  event.preventDefault();\n\n  galleryList.innerHTML = \"\";\n\npage = 1\n\n  query = event.target.elements.search.value.trim();\n\n  showLoader();\n  \n  if (query === \"\") {\n      iziToast.warning({\n          color: 'yellow',\n          message: \"Please fill in the field for search!\",\n          position: 'topRight'\n      })\n      return\n  }\n  try {\n    const data = await fetchImages(query,page)\n    if (data.hits.length === 0) {\n\n        iziToast.error({\n          message: \"Sorry, there are no images matching your search query. Please try again!\",\n          backgroundColor: \"red\",\n          messageColor: \"white\",\n          position: 'topRight'})\n        }\n        totalPages = Math.ceil(data.totalHits / perPage);\n        renderImages(data.hits);\n        event.target.reset();\n\n  } catch (error) {\n    console.log(error);\n          iziToast.error({\n            title: 'Error',\n            message: `Sorry, there are no images matching your search query. Please, try again!`,\n            position: 'topRight'}\n            )\n  }\n  infoBtnLoadMore();\n  hideLoader();\n  event.target.reset(); \n        }\n\n//*=========================================================================================================//\n\n//*============================== PAGINATION LOAD MORE ================================================//\n\nfunction deliteLoadMore() {\n  loadMoreBtn.classList.remove(\"is-hidden\");\n}\n\nfunction yesLoadMore() {\n  loadMoreBtn.classList.add(\"is-hidden\");\n}\n\nfunction infoBtnLoadMore() {\n\n  if (page >= totalPages) {\n    yesLoadMore();\n\n  } else {\n      deliteLoadMore();\n  }\n}\n  function scroll() {\n    const position = galleryList.firstElementChild.getBoundingClientRect().height;\n  scrollBy({\n      top: position,\n      behavior: 'smooth',\n  });\n}\n//*=========================================================================================================//\n\n\nloadMoreBtn.addEventListener(\"click\", clickRequest);\n\nasync function clickRequest() {\n  page += 1;\n  showLoader();\n  try {\n      const data = await fetchImages(query, page);\n\n      renderImages(data.hits);\n\n      if (page >= totalPages) {\n\n        yesLoadMore();\n\n          iziToast.info({\n              title: 'Info:',\n          message: `You have reached the end of the listüòâ`,\n          position: 'topRight',\n          })\n      }\n  } catch (err) {\n      console.log(err);\n      iziToast.info({\n          title: 'Info:',\n          message: `You have reached the end of the listüòâ`,\n          position: 'topRight',\n              })\n  }\n\n  scroll();\n  infoBtnLoadMore();\n  hideLoader();\n}\n\n//*===============================================================================//\n\n//*=======================SCROLL BTN to TOP=========================================//\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  const backToTop = document.getElementById(\"back-to-top\");\n \n  // –ü–æ–∫–∞–∑–∞—Ç–∏/—Å–∫—Ä–∏—Ç–∏ –∫–Ω–æ–ø–∫—É –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç—Ü—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏\n\n  window.addEventListener(\"scroll\", function () {\n    if (window.pageYOffset > 300){\n      backToTop.style.display = \"block\";\n    }else{\n      backToTop.style.display = \"none\";\n    }\n  });\n\n\n  // –ü–ª–∞–≤–Ω–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –ø—Ä–∏ –∫–ª—ñ–∫—É –Ω–∞ –∫–Ω–æ–ø–∫—É \n\n  backToTop.addEventListener(\"click\", function (event) {\n    event.preventDefault();\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n  });\n});\n//*===============================================================================//"],"names":["fetchImages","query","page","BASE_URL","axios","galleryList","lightbox","SimpleLightbox","renderImages","data","galleryMarkup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","form","loader","loadMoreBtn","totalPages","perPage","showLoader","hideLoader","validInput","event","iziToast","error","infoBtnLoadMore","deliteLoadMore","yesLoadMore","scroll","position","clickRequest","err","backToTop"],"mappings":"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"}